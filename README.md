# YNAB-Venmo integration

I used YNAB to track my finances and can't live without it. I often use Venmo to split transactions between friends, but I have to manually enter all transactions. Venmo discontinued its API in 2016, so an API connection directly between the two services is impossible. 
To work around this, I set up an email address that all my Venmo notifications are forwarded to.

## To Run

```
conda activate ynabvenmo
python3 main.py --real
```


## Setup 

1. Create a new Gmail account. Set up a forwarding filter on the email account that's connected to your Venmo so that all emails from `venmo@venmo.com` are forwarded to this Gmail. 

2. In [this setup guide](https://developers.google.com/gmail/api/quickstart/python#set-up-environment), follow the steps for Enable the API, Configure the OAuth consent screen, and Authorize credentials for a desktop application. The project for this does not have to be associated with the Gmail that you made in step 1, it can be in any Google Cloud account. 

    1. in Configure the OAuth consent screen - Add the Gmail inboxyou created in Step 1 as a test user. Give it Modify and ReadOnly scopes. 

3. Set up your Venmo account within YNAB. Create a new Unlinked account. Call it 'Venmo', and make sure the type is Cash. Once you've created the account, stay on this page - you'll need the URL soon. 

4. In the root folder of the repo, run `./setup.sh`. You will need a [YNAB Personal Access Token](https://api.ynab.com/#personal-access-tokens), which can be generated by going to your YNAB Account Settings > [Developer Settings](https://app.ynab.com/settings/developer) > New Token. The setup script will also ask you to paste the URL of the Venmo account within YNAB. Paste the URL from the account you made in step 2. 

    1. The script will ask you if you want to add a developmental budget. This allows you to add a secondary budget for testing if you don't want to use your main budget. If yes, make sure you've set up a Venmo Account within that budget as well. 

5. In the root of the project, run `conda env create -f environment.yml`. 
If you prefer to use a virtualenv, run `virtualenv ynabvenmo && ynabvenmo/bin/pip install -r requirements.txt`

6. Activate your environment using `conda activate ynabvenmo` 
or `source ynabvenmo/bin/activate`.

7. Run the python script using `python3 main.py --real`. The app will ask for your credentials. 